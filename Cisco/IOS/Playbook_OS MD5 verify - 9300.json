{"versionId":704,"visualScriptId":"2a4f429b-61d5-42b0-82d7-7320593b71c6","managedNetworks":["Default"],"name":"OS MD5 verify - 9300","author":"scorreale","description":"","nodes":[{"nodeId":"6c80937e-b218-48e9-b07e-5c3b91f7fc73","versionId":704,"type":"device_search","alias":"Diligent_Eclipse","nodeConfig":{"resolution": {"ipData": "10.0.0.251", "ipScheme": "\"interfaceIpAddress\"", "networks": ["Default"]}},"nodeProperties":{"x": 109.39999961853027, "y": 280.89999771118164, "data": {"name": "device_search", "config": {"resolution": {"type": "device_resolution"}}, "inputs": [], "outputs": [{"name": "device", "tags": [], "type": "device", "typeInference": "None", "typeInferenceMatchName": ""}], "isStartNode": true, "requiredPermissions": ["org.ziptie.playbook.cudPermission"], "requiredEntitlements": ["Playbooks"]}}},{"nodeId":"e55734f4-017d-4818-a25b-b499b8b9796f","versionId":704,"type":"run_code","alias":"Empathetic_Temple","nodeConfig":{"block": {"type": "COMMAND", "prompt": "", "commands": "verify /md5 flash:cat9k_iosxe.17.16.01.SPA.conf", "responseTimeout": 60}, "dontExit": false, "replacements": []},"nodeProperties":{"x": 395.238347737907, "y": 279.6088954401802, "data": {"name": "run_code", "config": {"block": {"type": "CommandBlock"}, "dontExit": {"type": "Boolean"}, "replacements": {"type": "List"}}, "inputs": [{"name": "device", "type": "VSModelDeviceHolder", "autowire": "None", "autowireOn": "NoConnection", "inputUsage": "User", "isOptional": false, "typeInference": "None"}], "outputs": [{"name": "output", "tags": [], "type": "job_results", "typeInference": "None", "typeInferenceMatchName": ""}, {"name": "error", "tags": ["Error"], "type": "job_errors", "typeInference": "None", "typeInferenceMatchName": ""}], "isStartNode": false, "requiredPermissions": ["org.ziptie.playbook.cudPermission"], "requiredEntitlements": ["Playbooks"]}}},{"nodeId":"7fd230f8-fe1f-45f8-8112-828c8cbecb67","versionId":704,"type":"ssh_exec","alias":"setup file","nodeConfig":{"config": {"host": "10.0.0.170", "port": 22, "command": "tee -a /data/test-$(date '+%Y%m%d-%H%M%S').json", "password": "password", "username": "username"}},"nodeProperties":{"x": 761.851268029728, "y": 535.5958882585164, "data": {"name": "ssh_exec", "config": {"config": {"type": "SshExecConfig"}}, "inputs": [{"name": "stdin", "type": "string", "autowire": "None", "autowireOn": "NoConnection", "inputUsage": "User", "isOptional": true, "typeInference": "None"}], "outputs": [{"name": "out", "tags": [], "type": "string", "typeInference": "None", "typeInferenceMatchName": ""}, {"name": "err", "tags": [], "type": "string", "typeInference": "None", "typeInferenceMatchName": ""}, {"name": "exit", "tags": [], "type": "string", "typeInference": "None", "typeInferenceMatchName": ""}, {"name": "failure", "tags": [], "type": "string", "typeInference": "None", "typeInferenceMatchName": ""}], "isStartNode": true, "requiredPermissions": ["org.ziptie.playbook.cudPermission"], "requiredEntitlements": ["Playbooks"]}}},{"nodeId":"1a39fdef-25fd-4029-802d-c3ccc4020fae","versionId":704,"type":"ssh_exec","alias":"output file","nodeConfig":{"config": {"host": "10.0.0.170", "port": 22, "command": "cat /data/test-$(date '+%Y%m%d-%H%M%S').json", "password": "password", "username": "username"}},"nodeProperties":{"x": 1050.7414371989994, "y": 537.517051278761, "data": {"name": "ssh_exec", "config": {"config": {"type": "SshExecConfig"}}, "inputs": [{"name": "stdin", "type": "string", "autowire": "None", "autowireOn": "NoConnection", "inputUsage": "User", "isOptional": true, "typeInference": "None"}], "outputs": [{"name": "out", "tags": [], "type": "string", "typeInference": "None", "typeInferenceMatchName": ""}, {"name": "err", "tags": [], "type": "string", "typeInference": "None", "typeInferenceMatchName": ""}, {"name": "exit", "tags": [], "type": "string", "typeInference": "None", "typeInferenceMatchName": ""}, {"name": "failure", "tags": [], "type": "string", "typeInference": "None", "typeInferenceMatchName": ""}], "isStartNode": true, "requiredPermissions": ["org.ziptie.playbook.cudPermission"], "requiredEntitlements": ["Playbooks"]}}},{"nodeId":"d8722342-d2f6-49be-b529-e042c5dc40eb","versionId":704,"type":"regex_match","alias":"check the verify output","nodeConfig":{"regex": "verify [\\w\\d\\s\\/\\(\\):\\.]+ = (?<hash>[\\w\\d]+)", "partialMatch": true},"nodeProperties":{"x": 681.8431338476955, "y": 286.5024758291355, "data": {"name": "regex_match", "config": {"regex": {"type": "String"}, "partialMatch": {"type": "Boolean"}}, "inputs": [{"name": "textToValidate", "type": "Any", "autowire": "None", "autowireOn": "NoConnection", "inputUsage": "User", "isOptional": false, "typeInference": "MatchOutputPreviousNode"}], "outputs": [{"name": "nonMatches", "tags": [], "type": "Any", "typeInference": "MatchInputType", "typeInferenceMatchName": "textToValidate"}, {"name": "matches", "tags": [], "type": "Any", "typeInference": "MatchInputType", "typeInferenceMatchName": "textToValidate"}], "isStartNode": false, "requiredPermissions": ["org.ziptie.playbook.cudPermission"], "requiredEntitlements": ["Playbooks"]}}},{"nodeId":"c2c137ea-c19c-4d6d-ab29-ef22420ac9e5","versionId":704,"type":"to_json","alias":"Convert to JSON","nodeConfig":{},"nodeProperties":{"x": 991.3591062119676, "y": 283.90103918519264, "data": {"name": "to_json", "config": {}, "inputs": [{"name": "content", "type": "Any", "autowire": "None", "autowireOn": "NoConnection", "inputUsage": "User", "isOptional": true, "typeInference": "None"}], "outputs": [{"name": "content", "tags": [], "type": "string", "typeInference": "None", "typeInferenceMatchName": ""}], "isStartNode": false, "requiredPermissions": ["org.ziptie.playbook.cudPermission"], "requiredEntitlements": ["Playbooks"]}}},{"nodeId":"4f2aab65-53d0-4f96-89c4-8203db4c6b11","versionId":704,"type":"memo","alias":"Adventurous_Dawn","nodeConfig":{"content": "<p>1) update device selection</p><p>2) update the run code for the OS package on device</p><p>3) update remote ssh host ip address</p><p>3a) update username/password</p><p>NOTE:  can use either json or CSV nodes...csv format puts out single line per device, json format outputs a lot more information:</p><p></br></p><p></br></p> "},"nodeProperties":{"x": -160.05380538468157, "y": 279.48398799903475, "data": {"name": "memo", "config": {"content": {"type": "String"}}, "inputs": [], "outputs": [{"name": "content", "tags": [], "type": "string", "typeInference": "None", "typeInferenceMatchName": ""}], "isStartNode": false, "requiredPermissions": ["org.ziptie.playbook.cudPermission"], "requiredEntitlements": ["Playbooks"]}}}],"edges":[{"edgeId":"ffd9ff52-4fa5-46c8-8502-74435fbbd265","versionId":704,"fromNode":"6c80937e-b218-48e9-b07e-5c3b91f7fc73","fromHandle":"device","toNode":"e55734f4-017d-4818-a25b-b499b8b9796f","toHandle":"device"},{"edgeId":"4e4fe68c-50a2-43a9-bab6-2590a12ecb36","versionId":704,"fromNode":"7fd230f8-fe1f-45f8-8112-828c8cbecb67","fromHandle":"exit","toNode":"1a39fdef-25fd-4029-802d-c3ccc4020fae","toHandle":"stdin"},{"edgeId":"7409b2cf-bf83-453b-aea9-1dd68d7dee7d","versionId":704,"fromNode":"e55734f4-017d-4818-a25b-b499b8b9796f","fromHandle":"output","toNode":"d8722342-d2f6-49be-b529-e042c5dc40eb","toHandle":"textToValidate"},{"edgeId":"a599a6bc-a186-4031-b155-92325fb67e4c","versionId":704,"fromNode":"d8722342-d2f6-49be-b529-e042c5dc40eb","fromHandle":"nonMatches","toNode":"c2c137ea-c19c-4d6d-ab29-ef22420ac9e5","toHandle":"content"},{"edgeId":"b3f2f525-6648-4f5d-b3a1-822e5f9751c9","versionId":704,"fromNode":"d8722342-d2f6-49be-b529-e042c5dc40eb","fromHandle":"matches","toNode":"c2c137ea-c19c-4d6d-ab29-ef22420ac9e5","toHandle":"content"},{"edgeId":"aa256cee-04ef-4468-bfa9-5ca5e2cc975f","versionId":704,"fromNode":"c2c137ea-c19c-4d6d-ab29-ef22420ac9e5","fromHandle":"content","toNode":"7fd230f8-fe1f-45f8-8112-828c8cbecb67","toHandle":"stdin"}],"deletable":true,"categoryId":"d160da39-d6e7-4128-ad59-e5963ef7e33e"}